(this["webpackJsonpexpense-tracker-react"]=this["webpackJsonpexpense-tracker-react"]||[]).push([[0],{48:function(e,t,n){e.exports=n(77)},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(19),c=n.n(s),o=n(10),l=n(8),u=n(4),i=Object(u.a)(),A=n(11),m=n(44),d=n(45),p="ALERT_SUCCESS",E="ALERT_ERROR",h="ALERT_CLEAR",g="USERS_REGISTER_REQUEST",f="USERS_REGISTER_SUCCESS",b="USERS_REGISTER_FAILURE",v="USERS_LOGIN_REQUEST",S="USERS_LOGIN_SUCCESS",O="USERS_LOGIN_FAILURE",C="USERS_LOGOUT",w="USERS_GETALL_REQUEST",y="USERS_GETALL_SUCCESS",j="USERS_GETALL_FAILURE",R="USERS_DELETE_REQUEST",I="USERS_DELETE_SUCCESS",N="USERS_DELETE_FAILURE",T=JSON.parse(localStorage.getItem("user")),Q=T?{loggedIn:!0,user:T}:{};var k=n(25),G=n(2);var U=Object(A.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{loggingIn:!0,user:t.user};case S:return{loggedIn:!0,user:t.user};case O:case C:return{};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{registering:!0};case f:case b:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{loading:!0};case y:return{items:t.users};case j:return{error:t.error};case R:return Object(G.a)(Object(G.a)({},e),{},{items:e.items.map((function(e){return e.id===t.id?Object(G.a)(Object(G.a)({},e),{},{deleting:!0}):e}))});case I:return{items:e.items.filter((function(e){return e.id!==t.id}))};case N:return Object(G.a)(Object(G.a)({},e),{},{items:e.items.map((function(e){if(e.id===t.id){e.deleting;var n=Object(k.a)(e,["deleting"]);return Object(G.a)(Object(G.a)({},n),{},{deleteError:t.error})}return e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{type:"alert-success",message:t.message};case E:return{type:"alert-danger",message:t.message};case h:return{};default:return e}}}),x=Object(d.createLogger)(),D=Object(A.d)(U,Object(A.a)(m.a,x));function M(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var B={success:function(e){return{type:p,message:e}},error:function(e){return{type:E,message:e}},clear:function(){return{type:h}}};var L={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("/api/v1/users/authenticate",n).then(J).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},logout:_,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/v1/users/register",t).then(J)},getAll:function(){var e={method:"GET",headers:M()};return fetch("/api/v1/users",e).then(J)},getById:function(e){var t={method:"GET",headers:M()};return fetch("/api/v1/users/".concat(e),t).then(J)},update:function(e){var t={method:"PUT",headers:Object(G.a)(Object(G.a)({},M()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("/api/v1/users/".concat(e.id),t).then(J)},delete:function(e){var t={method:"DELETE",headers:M()};return fetch("/api/v1/users/".concat(e),t).then(J)}};function _(){localStorage.removeItem("user")}function J(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(_(),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}return n}))}var F={login:function(e,t){return function(n){n({type:v,user:{username:e}}),L.login(e,t).then((function(e){n(function(e){return{type:S,user:e}}(e)),i.push("/")}),(function(e){n(function(e){return{type:O,error:e}}(e.toString())),n(B.error(e.toString()))}))}},logout:function(){return L.logout(),{type:C}},register:function(e){return function(t){t(function(e){return{type:g,user:e}}(e)),L.register(e).then((function(e){t(function(e){return{type:f,user:e}}()),i.push("/login"),t(B.success("Registration successful"))}),(function(e){t(function(e){return{type:b,error:e}}(e.toString())),t(B.error(e.toString()))}))}},getAll:function(){return function(e){e({type:w}),L.getAll().then((function(t){return e(function(e){return{type:y,users:e}}(t))}),(function(t){return e(function(e){return{type:j,error:e}}(t.toString()))}))}},delete:function(e){return function(t){t(function(e){return{type:R,id:e}}(e)),L.delete(e).then((function(n){return t(function(e){return{type:I,id:e}}(e))}),(function(n){return t(function(e,t){return{type:N,id:e,error:t}}(e,n.toString()))}))}}};var K=n(18),Y=n(12),H=n.n(Y),P=n(27),W=n(47),z=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(G.a)(Object(G.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(G.a)(Object(G.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(G.a)(Object(G.a)({},e),{},{transactions:[].concat(Object(W.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(G.a)(Object(G.a)({},e),{},{error:t.payload});default:return e}},V=n(28),Z=n.n(V),q={transactions:[],error:null,loading:!0},X=Object(a.createContext)(q),$=function(e){var t=e.children,n=Object(a.useReducer)(z,q),s=Object(K.a)(n,2),c=s[0],o=s[1];function l(){return(l=Object(P.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.a.get("/api/v1/transactions");case 3:t=e.sent,o({type:"GET_TRANSACTIONS",payload:t.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function u(){return(u=Object(P.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.a.delete("/api/v1/transactions/".concat(t));case 3:o({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function i(){return(i=Object(P.a)(H.a.mark((function e(t){var n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,Z.a.post("/api/v1/transactions",t,n);case 4:a=e.sent,o({type:"ADD_TRANSACTION",payload:a.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return r.a.createElement(X.Provider,{value:{transactions:c.transactions,error:c.error,loading:c.loading,getTransactions:function(){return l.apply(this,arguments)},deleteTransaction:function(e){return u.apply(this,arguments)},addTransaction:function(e){return i.apply(this,arguments)}}},t)},ee=function(){var e=Object(a.useState)(""),t=Object(K.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(0),o=Object(K.a)(c,2),l=o[0],u=o[1],i=Object(a.useContext)(X).addTransaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add new transaction"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({text:n,amount:+l})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"text"},"Text"),r.a.createElement("input",{type:"text",value:n,onChange:function(e){return s(e.target.value)},placeholder:"Enter text..."})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("br",null),"(negative - expense, positive - income)"),r.a.createElement("input",{type:"number",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Enter amount..."})),r.a.createElement("button",{className:"btn"},"Add transaction")))};function te(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var ne=function(){var e=Object(a.useContext)(X).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Your Balance"),r.a.createElement("h1",null,"$",te(e)))},ae=function(){return r.a.createElement("h2",null,"Expense Tracker")},re=function(){var e=Object(a.useContext)(X).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return r.a.createElement("div",{className:"inc-exp-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Income"),r.a.createElement("p",{className:"money plus"},"$",te(t))),r.a.createElement("div",null,r.a.createElement("h4",null,"Expense"),r.a.createElement("p",{className:"money minus"},"$",te(n))))},se=function(e){var t=e.transaction,n=Object(a.useContext)(X).deleteTransaction,s=t.amount<0?"-":"+";return r.a.createElement("li",{className:t.amount<0?"minus":"plus"},t.text," ",r.a.createElement("span",null,s,"$",te(Math.abs(t.amount))),r.a.createElement("button",{onClick:function(){return n(t._id)},className:"delete-btn"},"x"))},ce=function(){var e=Object(a.useContext)(X),t=e.transactions,n=e.getTransactions;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"History"),r.a.createElement("ul",{className:"list"},t.map((function(e){return r.a.createElement(se,{key:e._id,transaction:e})}))))},oe=function(e){var t=e.component,n=Object(k.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},le=n(15),ue=n(22),ie=n(23),Ae=n(9),me=n(26),de=n(24),pe=n(14),Ee=function(e){Object(me.a)(n,e);var t=Object(de.a)(n);function n(e){var a;return Object(ue.a)(this,n),(a=t.call(this,e)).props.logout(),a.state={username:"",password:"",submitted:!1},a.handleChange=a.handleChange.bind(Object(Ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ae.a)(a)),a}return Object(ie.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(le.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,n=t.username,a=t.password;n&&a&&this.props.login(n,a)}},{key:"render",value:function(){var e=this.props.loggingIn,t=this.state,n=t.username,a=t.password,s=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(s&&!n?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:n,onChange:this.handleChange}),s&&!n&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(s&&!a?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a,onChange:this.handleChange}),s&&!a&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),e&&r.a.createElement("img",{alt:"a",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(pe.a,{to:"/register",className:"btn btn-link"},"Register"))))}}]),n}(r.a.Component);var he={login:F.login,logout:F.logout},ge=Object(l.b)((function(e){return{loggingIn:e.authentication.loggingIn}}),he)(Ee),fe=function(e){Object(me.a)(n,e);var t=Object(de.a)(n);function n(e){var a;return Object(ue.a)(this,n),(a=t.call(this,e)).state={user:{username:"",password:"",walletAddress:""},submitted:!1},a.handleChange=a.handleChange.bind(Object(Ae.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ae.a)(a)),a}return Object(ie.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;this.setState({user:Object(G.a)(Object(G.a)({},r),{},Object(le.a)({},n,a))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user;t.walletAddress&&t.username&&t.password&&this.props.register(t)}},{key:"render",value:function(){var e=this.props.registering,t=this.state,n=t.user,a=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(a&&!n.username?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:n.username,onChange:this.handleChange}),a&&!n.username&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(a&&!n.walletAddress?" has-error":"")},r.a.createElement("label",{htmlFor:"walletAddress"},"Wallet Address"),r.a.createElement("input",{type:"text",className:"form-control",name:"walletAddress",value:n.walletAddress,onChange:this.handleChange}),a&&!n.walletAddress&&r.a.createElement("div",{className:"help-block"},"Wallet address is required")),r.a.createElement("div",{className:"form-group"+(a&&!n.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:n.password,onChange:this.handleChange}),a&&!n.password&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),e&&r.a.createElement("img",{alt:"b",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(pe.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),n}(r.a.Component);var be={register:F.register},ve=Object(l.b)((function(e){return{registering:e.registration.registering}}),be)(fe),Se=(n(76),function(){return r.a.createElement($,null,r.a.createElement(ae,null),r.a.createElement("div",{className:"container"},r.a.createElement(ne,null),r.a.createElement(re,null),r.a.createElement(ce,null),r.a.createElement(ee,null)))});var Oe=function(){var e=Object(l.d)((function(e){return e.alert})),t=Object(l.c)();return Object(a.useEffect)((function(){i.listen((function(e,n){t(B.clear())}))}),[]),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(o.c,{history:i},r.a.createElement(o.d,null,r.a.createElement(oe,{exact:!0,path:"/",component:Se}),r.a.createElement(o.b,{path:"/login",component:ge}),r.a.createElement(o.b,{path:"/register",component:ve}),r.a.createElement(o.a,{from:"*",to:"/"}))))))};c.a.render(r.a.createElement(l.a,{store:D},r.a.createElement(Oe,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.1f98853e.chunk.js.map