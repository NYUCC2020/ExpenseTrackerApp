(this["webpackJsonpexpense-tracker-react"]=this["webpackJsonpexpense-tracker-react"]||[]).push([[0],{43:function(e,t,n){e.exports=n(72)},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),s=n.n(c),o=n(10),u=n(7),l=n(4),i=Object(l.a)(),m=n(11),d=n(39),p=n(40),f="ALERT_SUCCESS",E="ALERT_ERROR",g="ALERT_CLEAR",b="USERS_REGISTER_REQUEST",v="USERS_REGISTER_SUCCESS",O="USERS_REGISTER_FAILURE",h="USERS_LOGIN_REQUEST",S="USERS_LOGIN_SUCCESS",y="USERS_LOGIN_FAILURE",j="USERS_LOGOUT",N="USERS_GETALL_REQUEST",R="USERS_GETALL_SUCCESS",T="USERS_GETALL_FAILURE",A="USERS_DELETE_REQUEST",_="USERS_DELETE_SUCCESS",C="USERS_DELETE_FAILURE",w=JSON.parse(localStorage.getItem("user")),x=w?{loggedIn:!0,user:w}:{};var I=n(21),U=n(2);var L=Object(m.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{loggingIn:!0,user:t.user};case S:return{loggedIn:!0,user:t.user};case y:case j:return{};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{registering:!0};case v:case O:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{loading:!0};case R:return{items:t.users};case T:return{error:t.error};case A:return Object(U.a)(Object(U.a)({},e),{},{items:e.items.map((function(e){return e.id===t.id?Object(U.a)(Object(U.a)({},e),{},{deleting:!0}):e}))});case _:return{items:e.items.filter((function(e){return e.id!==t.id}))};case C:return Object(U.a)(Object(U.a)({},e),{},{items:e.items.map((function(e){if(e.id===t.id){e.deleting;var n=Object(I.a)(e,["deleting"]);return Object(U.a)(Object(U.a)({},n),{},{deleteError:t.error})}return e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{type:"alert-success",message:t.message};case E:return{type:"alert-danger",message:t.message};case g:return{};default:return e}}}),k=Object(p.createLogger)(),G=Object(m.d)(L,Object(m.a)(d.a,k));function D(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var F={success:function(e){return{type:f,message:e}},error:function(e){return{type:E,message:e}},clear:function(){return{type:g}}};var J={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("/api/v1/users/authenticate",n).then(q).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},logout:P,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/v1/users/register",t).then(q)},getAll:function(){var e={method:"GET",headers:D()};return fetch("/api/v1/users",e).then(q)},getById:function(e){var t={method:"GET",headers:D()};return fetch("/api/v1/users/".concat(e),t).then(q)},update:function(e){var t={method:"PUT",headers:Object(U.a)(Object(U.a)({},D()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("/api/v1/users/".concat(e.id),t).then(q)},delete:function(e){var t={method:"DELETE",headers:D()};return fetch("/api/v1/users/".concat(e),t).then(q)}};function P(){localStorage.removeItem("user")}function q(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(P(),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}return n}))}var B={login:function(e,t){return function(n){n({type:h,user:{username:e}}),J.login(e,t).then((function(e){n(function(e){return{type:S,user:e}}(e)),i.push("/")}),(function(e){n(function(e){return{type:y,error:e}}(e.toString())),n(F.error(e.toString()))}))}},logout:function(){return J.logout(),{type:j}},register:function(e){return function(t){t(function(e){return{type:b,user:e}}(e)),J.register(e).then((function(e){t(function(e){return{type:v,user:e}}()),i.push("/login"),t(F.success("Registration successful"))}),(function(e){t(function(e){return{type:O,error:e}}(e.toString())),t(F.error(e.toString()))}))}},getAll:function(){return function(e){e({type:N}),J.getAll().then((function(t){return e(function(e){return{type:R,users:e}}(t))}),(function(t){return e(function(e){return{type:T,error:e}}(t.toString()))}))}},delete:function(e){return function(t){t(function(e){return{type:A,id:e}}(e)),J.delete(e).then((function(n){return t(function(e){return{type:_,id:e}}(e))}),(function(n){return t(function(e,t){return{type:C,id:e,error:t}}(e,n.toString()))}))}}};var Q=n(8),$=n(12),W=n.n($),z=n(22),H=n(42),M=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(U.a)(Object(U.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(U.a)(Object(U.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(U.a)(Object(U.a)({},e),{},{transactions:[].concat(Object(H.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(U.a)(Object(U.a)({},e),{},{error:t.payload});default:return e}},Y=n(23),K=n.n(Y),V={transactions:[],error:null,loading:!0},X=Object(a.createContext)(V),Z=function(e){var t=e.children,n=Object(a.useReducer)(M,V),c=Object(Q.a)(n,2),s=c[0],o=c[1];function u(){return(u=Object(z.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("/api/v1/transactions");case 3:t=e.sent,o({type:"GET_TRANSACTIONS",payload:t.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=Object(z.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.delete("/api/v1/transactions/".concat(t));case 3:o({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function i(){return(i=Object(z.a)(W.a.mark((function e(t){var n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,K.a.post("/api/v1/transactions",t,n);case 4:a=e.sent,o({type:"ADD_TRANSACTION",payload:a.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return r.a.createElement(X.Provider,{value:{transactions:s.transactions,error:s.error,loading:s.loading,getTransactions:function(){return u.apply(this,arguments)},deleteTransaction:function(e){return l.apply(this,arguments)},addTransaction:function(e){return i.apply(this,arguments)}}},t)},ee=function(){var e=Object(a.useState)(""),t=Object(Q.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(0),o=Object(Q.a)(s,2),u=o[0],l=o[1],i=Object(a.useContext)(X).addTransaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add new transaction"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({text:n,amount:+u})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"text"},"Text"),r.a.createElement("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)},placeholder:"Enter text..."})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("br",null),"(negative - expense, positive - income)"),r.a.createElement("input",{type:"number",value:u,onChange:function(e){return l(e.target.value)},placeholder:"Enter amount..."})),r.a.createElement("button",{className:"btn"},"Add transaction")))};function te(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var ne=function(){var e=Object(a.useContext)(X).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Your Balance"),r.a.createElement("h1",null,"$",te(e)))},ae=function(){return r.a.createElement("h2",null,"Expense Tracker")},re=function(){var e=Object(a.useContext)(X).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=(-1*e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return r.a.createElement("div",{className:"inc-exp-container"},r.a.createElement("div",null,r.a.createElement("h4",null,"Income"),r.a.createElement("p",{className:"money plus"},"$",te(t))),r.a.createElement("div",null,r.a.createElement("h4",null,"Expense"),r.a.createElement("p",{className:"money minus"},"$",te(n))))},ce=function(e){var t=e.transaction,n=Object(a.useContext)(X).deleteTransaction,c=t.amount<0?"-":"+";return r.a.createElement("li",{className:t.amount<0?"minus":"plus"},t.text," ",r.a.createElement("span",null,c,"$",te(Math.abs(t.amount))),r.a.createElement("button",{onClick:function(){return n(t._id)},className:"delete-btn"},"x"))},se=function(){var e=Object(a.useContext)(X),t=e.transactions,n=e.getTransactions;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"History"),r.a.createElement("ul",{className:"list"},t.map((function(e){return r.a.createElement(ce,{key:e._id,transaction:e})}))))},oe=function(e){var t=e.component,n=Object(I.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ue=n(15),le=n(14);function ie(){var e=Object(a.useState)({username:"",password:""}),t=Object(Q.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(Q.a)(s,2),l=o[0],i=o[1],m=n.username,d=n.password,p=Object(u.c)((function(e){return e.authentication.loggingIn})),f=Object(u.b)();function E(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(ue.a)({},n,a))}))}return Object(a.useEffect)((function(){f(B.logout())}),[f]),r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),i(!0),m&&d&&f(B.login(m,d))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",value:m,onChange:E,className:"form-control"+(l&&!m?" is-invalid":"")}),l&&!m&&r.a.createElement("div",{className:"invalid-feedback"},"Username is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:d,onChange:E,className:"form-control"+(l&&!d?" is-invalid":"")}),l&&!d&&r.a.createElement("div",{className:"invalid-feedback"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},p&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"),r.a.createElement(le.a,{to:"/register",className:"btn btn-link"},"Register"))))}function me(){var e=Object(a.useState)({username:"",password:"",walletAddress:""}),t=Object(Q.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),o=Object(Q.a)(s,2),l=o[0],i=o[1],m=Object(u.c)((function(e){return e.registration.registering})),d=Object(u.b)();function p(e){var t=e.target,n=t.name,a=t.value;c((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(ue.a)({},n,a))}))}return Object(a.useEffect)((function(){d(B.logout())}),[d]),r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),i(!0),n.username&&n.password&&n.walletAddress&&d(B.register(n))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",value:n.username,onChange:p,className:"form-control"+(l&&!n.username?" is-invalid":"")}),l&&!n.username&&r.a.createElement("div",{className:"invalid-feedback"},"Username is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Wallet Address"),r.a.createElement("input",{type:"text",name:"walletAddress",value:n.walletAddress,onChange:p,className:"form-control"+(l&&!n.walletAddress?" is-invalid":"")}),l&&!n.walletAddress&&r.a.createElement("div",{className:"invalid-feedback"},"Wallet Address is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:n.password,onChange:p,className:"form-control"+(l&&!n.password?" is-invalid":"")}),l&&!n.password&&r.a.createElement("div",{className:"invalid-feedback"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},m&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Register"),r.a.createElement(le.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}n(71);var de=function(){return r.a.createElement(Z,null,r.a.createElement(ae,null),r.a.createElement("div",{className:"container"},r.a.createElement(ne,null),r.a.createElement(re,null),r.a.createElement(se,null),r.a.createElement(ee,null)))};var pe=function(){var e=Object(u.c)((function(e){return e.alert})),t=Object(u.b)();return Object(a.useEffect)((function(){i.listen((function(e,n){t(F.clear())}))}),[t]),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(o.c,{history:i},r.a.createElement(o.d,null,r.a.createElement(oe,{exact:!0,path:"/",component:de}),r.a.createElement(o.b,{path:"/login",component:ie}),r.a.createElement(o.b,{path:"/register",component:me}),r.a.createElement(o.a,{from:"*",to:"/"}))))))};s.a.render(r.a.createElement(u.a,{store:G},r.a.createElement(pe,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.f5a3332e.chunk.js.map